#!/usr/bin/env node

var program = require('commander');
var getDownloadURL = require('../lib/get');
var isDebug = false;

console.debug = function(args) {
  if (isDebug) {
    console.log(args);
  }
}
program
  .version('0.0.1')
  .option('-s, --selector [selector]', 'set selector to match html element you want', '#link_text_span')
  .option('-x, --xpath [xpath]', 'set xpath to match html element you want')
  .option('-v, --verbose', 'verbose')
  .parse(process.argv);

if (program.verbose) isDebug = true;
console.debug(' args     : %j', program.args);
console.debug(' selector : %s', program.selector);
if (program.xpath) console.debug(' xpath : %s', program.xpath);

// getDownloadURL('http://moviejie.com/link/ZwLmZwL1AwVhqUDmZwR2AwN4YwVjYwR5ZmD4At==/', program.selector).then(function(result) {
getDownloadURL('http://moviejie.com/movie/334f5f/', 'td.movie_name:contains(HDTVrip)').then(function(result) {
  console.log(result)
});
