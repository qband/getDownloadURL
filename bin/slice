#!/usr/bin/env node

var program = require('commander');
var getDownloadURL = require('../lib/get');
var isDebug = false;

console.debug = function(args) {
  if (isDebug) {
    console.log(args);
  }
}
program
  .version('0.0.1')
  .usage('is a cli tool to extract data from web page')
  .option('-u, --url [url]', 'set which url to grab', 'http://moviejie.com/movie/334f5f/')
  .option('-x, --xpath', 'use xpath instead of selector')
  .option('-v, --verbose', 'verbose')
  .parse(process.argv);

if (program.verbose) isDebug = true;
console.debug(' args     : %j', program.args);
console.debug(' selector : %s', program.selector);
if (program.xpath) console.debug(' xpath : %s', program.xpath);

// program.args.push('#link_text_span');
program.args.push('td.movie_name:contains(HDTVrip)');

getDownloadURL(program.url, program.args.pop()).then(function(result) {
  console.log(result)
});
